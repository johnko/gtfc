import os
import subprocess
from watchdog.events import FileSystemEventHandler
from watchdog.observers import Observer

homepath = os.path.expanduser("~")

class ReloadEventHandler(FileSystemEventHandler):
    def dispatch(self, event):
        subprocess.call( [os.path.join(homepath, u'bin', u'gtfc-push')] , os.getenv('FOLDER','') )

repos_root = os.getenv('FOLDER','')

observer = Observer()
observer.daemon = True
observer.schedule(ReloadEventHandler(), repos_root, recursive=False)
observer.start()
