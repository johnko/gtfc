#!/bin/sh

# gtfc-bootstrap folder

. ${HOME}/bin/gtfc-keygen
. ${HOME}/bin/gtfc-parsefolder $1

git config user.email "`whoami`@`hostname -s`.gtfc.local"
git config user.name "`whoami`"

[ -d ${FOLDER} ] || git init --separate-git-dir=${GITPACKDIR} ${FOLDER}
[ -d ${FOLDER} ] || exit 1

# add my pubkey to existing cluster (i am the first node)
cat ${HOME}/.ssh/authorized_keys.mypubkey \
| cat >>${HOME}/.ssh/authorized_keys2
